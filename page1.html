<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í¸ì§€ ì‘ì„± ë° ì „ì†¡ ì‹œë®¬ë ˆì´ì…˜ (ë§í’ì„  ëª¨ë‹¬ ì ìš©)</title>
    
    <script>
        (function(d) {
          var config = {
            kitId: 'mxn6rjj',
            scriptTimeout: 3000,
            async: true
          },
          h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
        })(document);
    </script>
    
    <style>
        /* ======================================= */
        /* CSS: ì˜¤ë¥¸ìª½ ìƒë‹¨ ê³ ì • ë ˆì´ì•„ì›ƒ (ê°œë³„ ë¶„ë¦¬ ê°•í™”) */
        /* ======================================= */
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: inherit;
            font-weight: inherit;
            font-style: inherit;
        }

        /* í°íŠ¸ ë° ë°°ê²½ ì„¤ì • */
        body {
            width: 100vw;
            height: 100vh;
            font-family: "dotumche", sans-serif !important; 
            font-weight: 400 !important;
            font-style: normal !important;
            font-size: 14px; 
            
            background-image: url('https://i.imgur.com/gxoSwlS.png');
            background-size: 1550px auto; 
            background-repeat: no-repeat;
            
            background-position: center center; 
            background-attachment: fixed;
            position: relative; 
            
            display: flex;
            justify-content: center; 
            align-items: center; 
            overflow: hidden; 
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        #main-container {
            display: flex;
            width: 95%; 
            max-width: 1200px; 
            background-color: transparent; 
            box-shadow: none; 
            min-height: 100px;
            position: static; 
        }
        
        /* ì™¼ìª½ ì½˜í…ì¸  ë°•ìŠ¤ (í¸ì§€ ì˜ì—­) */
        .left-content {
             flex: 1; 
             padding: 50px 100px 70px 100px; 
             display: flex;
             flex-direction: column;
             align-items: center;
             justify-content: center;
             background-color: transparent;
             width: 100%; 
        }

        /* ì…ë ¥ ì°½ ìŠ¤íƒ€ì¼ */
        #animated-text {
            width: 100%;
            height: 500px; 
            border: none; 
            background-color: transparent;
            resize: none;
            outline: none;
            font-size: 1.5em; 
            padding: 0;
            line-height: 3;
            text-align: left; 
        }
        
        /* ======================================= */
        /* ì˜¤ë¥¸ìª½ ì‚¬ì´ë“œë°” ì˜ì—­ */
        /* ======================================= */
        .right-sidebar {
            position: fixed; 
            top: 60px; 
            right: 20px; 
            width: 150px; 
            padding: 20px 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            background-color: rgba(255, 255, 255, 5); 
            border: 1px solid black; 
            z-index: 10; 
            position: fixed; 
        }
        
        /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        #back-button-container {
            position: absolute; 
            top: -50px; 
            right: -10px; 
            cursor: pointer;
            z-index: 10; 
            width: 39px; 
            height: 40px; 
        }

        #back-button {
            width: 100%; 
            height: 100%; 
            display: block;
            background-image: url('https://i.imgur.com/GcK29iF.png'); 
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        /* ì „ì†¡ ìƒíƒœ í‘œì‹œ ì˜ì—­ */
        #status-display {
            margin-top: 10px; 
            margin-bottom: 25px; 
            padding-bottom: 10px;
            border-bottom: 1px solid #ccc;
        }
        
        #status-display h1 {
             margin-bottom: 15px; 
             font-size: 1.2em; 
        }

        #status-display p {
             margin-top: 5px; 
             line-height: 1.4; 
        }

        /* ìƒíƒœ ì´ë¯¸ì§€ í¬ê¸° */
        #sending-image {
            height: 40px; 
            width: 100px; 
            margin-top: 10px;
            margin-bottom: 15px;
        }

        /* ê°œë³„ ì•¡ì…˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .custom-button {
            cursor: pointer;
            padding: 3px 10px;
            margin-top: 14px; 
            width: 100px; 
            border: 1px solid #000;
            font-size: 0.9em;
            background-color: #f7f7f7;
            text-align: center;
            line-height: 1.3;
            transition: background-color 0.1s;
        }

        .custom-button:hover:not(.disabled) {
            background-color: #ddd;
        }
        
        /* ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ */
        .custom-button.disabled {
            cursor: default;
            background-color: #ccc;
            color: #666;
            opacity: 0.1;
        }

        /* ì´ë¯¸ì§€ í¸ì§€í•¨ ì»¨í…Œì´ë„ˆ ë° ë¡œê·¸ ìŠ¤íƒ€ì¼ (ìƒëµ) */
        #history-log-container { width: 250%; margin-top: 0px; display: none; display: flex; justify-content: center; }
        #history-log-background { width: 195px; height: 210px; background-image: url('https://i.imgur.com/jsK3puQ.png'); background-size: contain; background-repeat: no-repeat; background-position: center; padding: 0; }
        #history-log { overflow-y: auto; height: 100%; width: 100%; padding: 20px 50px 20px 60px; line-height: 1.2; }
        #history-log > p, .history-item { text-align: left !important; font-size: 0.8em; line-height: 1.4; word-break: break-word; width: 100%; }
        #history-log > p { margin-top: 5px; } 
        .history-item { padding: 6px 0; }
        
        /* í•˜ë‹¨ ì¥ì‹ ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ */
        #bottom-image-container { 
            position: fixed; 
            bottom: 50px; 
            right: 30px; 
            z-index: 1000;
            width: auto; 
            height: auto;
        }

        /* ğŸª¨ ì´ë¯¸ì§€ ë–¨ë¦¼ ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
        @keyframes subtle-wobble {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 1px) rotate(-1deg); }
            75% { transform: translate(1px, 1px) rotate(1deg); }
            100% { transform: translate(-1px, -1px) rotate(-1deg); }
        }
        
        /* í•˜ë‹¨ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        #bottom-image { 
            max-width: 60px; 
            cursor: pointer; 
            display: block;
            animation: subtle-wobble 1.5s infinite; 
            transition: transform 0.2s; 
            box-shadow: none; 
            border-radius: 0; 
        }
        
        /* í˜¸ë²„ ì‹œ ì• ë‹ˆë©”ì´ì…˜ ì¼ì‹œ ì •ì§€ ë° ì¶”ê°€ íš¨ê³¼ */
        #bottom-image:hover {
            animation-play-state: paused;
            transform: scale(1.15); 
        }

        h1 { font-size: 1.2em; }
        
        /* ë§í’ì„  ìŠ¤íƒ€ì¼ */
        #speech-bubble {
            position: absolute; 
            bottom: 60px; 
            right: 60px; 
            width: 280px; 
            padding: 15px;
            background-color: white; 
            border: 2px solid black;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0);
            z-index: 1001; 
            display: none; 
            
            
                /* ğŸš¨ ìˆ˜ì •: ë§í’ì„  í…ìŠ¤íŠ¸ë¥¼ ì™¼ìª½ ì •ë ¬ë¡œ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì • ğŸš¨ */
            text-align: left;
            
            /* ê¼¬ë¦¬í‘œ CSS (ìƒëµ) */
            &::after { content: ''; position: absolute; bottom: -10px; right: 5px; width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 10px solid black; z-index: 1002; }
            &::before { content: ''; position: absolute; bottom: -8px; right: 7px; width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 8px solid white; z-index: 1003; }
        }
        
        .bubble-content h2 { margin-bottom: 10px; font-size: 1.2em; text-align: center; }
        /* ğŸš¨ ì¶”ê°€: ë§í’ì„  ë‚´ë¶€ì˜ p íƒœê·¸ë„ ì™¼ìª½ ì •ë ¬ì„ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì • ğŸš¨ */
        .bubble-content p { 
            line-height: 1.5; 
            margin-bottom: 5px; 
            font-size: 0.9em;
            text-align: left; /* ëª…ì‹œì  ì™¼ìª½ ì •ë ¬ */
            word-break: keep-all; /* ë‹¨ì–´ ë‹¨ìœ„ë¡œ ì¤„ë°”ê¿ˆì„ ì‹œë„í•˜ì—¬ ìì—°ìŠ¤ëŸ¬ì›€ì„ ë†’ì„ */
        }

        /* ëª¨ë°”ì¼ ëŒ€ì‘ (ìƒëµ) */
        @media (max-width: 600px) {
            body { align-items: flex-start; } 
            #main-container { flex-direction: column; min-height: initial; }
            .left-content { padding: 40px 20px; border-bottom: 1px solid #eee; }
            .right-sidebar { position: fixed; top: 20px; right: 20px; width: 150px; background-color: rgba(255, 255, 255, 1); padding: 20px; border: 1px solid black; }
            #back-button-container { top: -10px; right: -10px; width: 25px; height: 25px; }
            #bottom-image-container { position: fixed; bottom: 20px; right: 20px; }
            #speech-bubble { width: 200px; bottom: 75px; right: 0px; }
            #speech-bubble::after { right: 50px; } 
            #speech-bubble::before { right: 52px; } 
        }
    </style>
</head>
<body>

<div id="main-container">
    <div class="left-content">
        <textarea id="animated-text" placeholder="ì—¬ê¸°ì— í¸ì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." rows="10"></textarea>
    </div>
    
    <div class="right-sidebar">
        <div id="back-button-container">
            <div id="back-button"></div>
        </div>
        
        <div id="status-display">
            <h1>ì „ì†¡ ìƒíƒœ</h1>
            <img id="sending-image" src="https://i.imgur.com/gIfONqJ.png" alt="ìˆ˜ì‹  ì¤‘ ì´ë¯¸ì§€" style="display: none;">
            <p id="status-message">ë²„íŠ¼ì„ ëˆŒëŸ¬ í¸ì§€ë¥¼ ë³´ë‚´ì„¸ìš”.</p>
        </div>
        
        <div id="send-button" class="custom-button"> ë³´ë‚´ê¸°</div>
        
        <div id="toggle-history-button" class="custom-button">ë³´ë‚¸ í¸ì§€<br>ë³´ê¸°</div>
        
        <br>
        
        <div id="history-log-container">
            <div id="history-log-background">
                <div id="history-log">
                    <p style="text-align: left; color: black; margin-top: 5px; font-size: 0.8em; line-height: 1.4;">ì „ì†¡ëœ í¸ì§€ê°€<br>ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="bottom-image-container">
    
    <div id="speech-bubble" class="bubble-content">
        <h2>ë‹¤ë¥¸ ì„¸ê³„ì—ì„œ ë³´ë‚´ëŠ” í¸ì§€</h2>
        <p>
            ì´ê³³ì€ ë‹¤ë¥¸ ì„¸ê³„ì—ì„œ ë³´ë‚´ëŠ” í¸ì§€ë¥¼ ì“°ëŠ” ìë¦¬ì…ë‹ˆë‹¤.
            ìµìˆ™í•œ ì¥ì†Œë¥¼ í–¥í•œ ê¸°ë¡ì´ì, ì œí•œëœ ì„¸ê³„ ë°”ê¹¥ì„ ìƒìƒí•˜ê³  ë°”ë¼ë³´ê¸° ìœ„í•´ í¸ì§€ë¥¼ ì”ë‹ˆë‹¤.
        </p>
    </div>
    
    <img id="bottom-image" src="https://i.imgur.com/mnv4aTL.png" alt="í•˜ë‹¨ ì¥ì‹ ì´ë¯¸ì§€">

</div>


<script>
    // =======================================
    // JavaScript (ìˆ˜ì •ëœ ë¡œì§)
    // =======================================
    document.addEventListener("DOMContentLoaded", function () {
        const textarea = document.getElementById('animated-text');
        const sendButton = document.getElementById('send-button'); 
        const toggleHistoryButton = document.getElementById('toggle-history-button'); 
        
        const sendingImage = document.getElementById('sending-image');
        const statusMessage = document.getElementById('status-message');
        const historyLogContainer = document.getElementById('history-log-container'); 
        const historyLog = document.getElementById('history-log');
        
        const bottomImageContainer = document.getElementById('bottom-image-container');
        const bottomImage = document.getElementById('bottom-image'); 
        const speechBubble = document.getElementById('speech-bubble'); 
        
        const backButtonContainer = document.getElementById('back-button-container'); 
        
        const IMAGE_URL_1 = 'https://i.imgur.com/gIfONqJ.png'; 
        const IMAGE_URL_2 = 'https://i.imgur.com/LOFolGh.png'; 
        let intervalId;
        let letterHistory = []; 
        
        // ğŸš¨ ìˆ˜ì •ëœ ë¶€ë¶„: ë’¤ë¡œê°€ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
        backButtonContainer.addEventListener('click', function() {
            // ì§€ì •ëœ URLë¡œ ì´ë™
            window.location.href = 'https://yeonjicheon.github.io/index.html/';
        });


        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[i], array[j]];
            }
            return array;
        }

        function showRandomHistory() {
            if (letterHistory.length === 0) {
                // JSì—ì„œ ìƒˆë¡œ ìƒì„±í•  ë•Œë„ ì™¼ìª½ ì •ë ¬ ì ìš©
                historyLog.innerHTML = '<p style="text-align: left; color: black; margin-top: 5px; font-size: 0.8em; line-height: 1.4;">ì „ì†¡ëœ í¸ì§€ê°€<br>ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            const shuffledHistory = shuffleArray([...letterHistory]);
            historyLog.innerHTML = ''; 

            shuffledHistory.forEach(content => {
                const div = document.createElement('div');
                div.className = 'history-item';
                
                let displayContent = content.replace(/\n/g, '<br>');
                
                if (displayContent.length > 100) { 
                    displayContent = displayContent.substring(0, 100) + '...';
                }
                
                div.innerHTML = displayContent; 
                historyLog.appendChild(div);
            });
        }
        
        toggleHistoryButton.addEventListener('click', function() {
            if (toggleHistoryButton.classList.contains('disabled')) return; 
            
            if (historyLogContainer.style.display === 'none' || historyLogContainer.style.display === '') {
                showRandomHistory(); 
                historyLogContainer.style.display = 'flex'; 
                // í…ìŠ¤íŠ¸ ë³€ê²½: ë³´ë‚¸ í¸ì§€ ë³´ê¸° -> ë³´ë‚¸ í¸ì§€ ìˆ¨ê¸°ê¸°
                toggleHistoryButton.innerHTML = "ë³´ë‚¸ í¸ì§€<br>ìˆ¨ê¸°ê¸°"; 
            } else {
                historyLogContainer.style.display = 'none'; 
                // í…ìŠ¤íŠ¸ ë³€ê²½: ë³´ë‚¸ í¸ì§€ ìˆ¨ê¸°ê¸° -> ë³´ë‚¸ í¸ì§€ ë³´ê¸°
                toggleHistoryButton.innerHTML = "ë³´ë‚¸ í¸ì§€<br>ë³´ê¸°";
            }
        });

        textarea.addEventListener('input', function() {
            if (this.value.length > 0) {
                this.classList.add('writing-active');
            } else {
                this.classList.remove('writing-active');
            }
        });

        sendButton.addEventListener('click', function() {
            if (sendButton.classList.contains('disabled')) return; 
            
            const letterContent = textarea.value.trim();
            if (letterContent === "") {
                alert("í¸ì§€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return;
            }
            
            // ë²„íŠ¼ ë¹„í™œì„±í™” ë° í´ë˜ìŠ¤ ì¶”ê°€
            sendingImage.style.display = 'block';
            sendButton.classList.add('disabled');
            toggleHistoryButton.classList.add('disabled');
            textarea.disabled = true;
            
            statusMessage.textContent = "í¸ì§€ë¥¼ ìˆ˜ì‹  ì¤‘ì…ë‹ˆë‹¤...";
            statusMessage.style.color = 'gray'; 
            
            // ì´ë¯¸ì§€ ê¹œë¹¡ì„ íš¨ê³¼ ì‹œì‘
            let toggle = true;
            intervalId = setInterval(() => {
                sendingImage.src = toggle ? IMAGE_URL_2 : IMAGE_URL_1;
                toggle = !toggle;
            }, 500); 
            
            setTimeout(() => {
                clearInterval(intervalId);
                alert("í¸ì§€ ì „ì†¡ ì™„ë£Œ!");
                letterHistory.push(letterContent); 
                if (historyLogContainer.style.display === 'flex') {
                    showRandomHistory();
                }
                
                // ë²„íŠ¼ í™œì„±í™” ë° í´ë˜ìŠ¤ ì œê±°
                sendingImage.style.display = 'none';
                sendingImage.src = IMAGE_URL_1; 
                sendButton.classList.remove('disabled');
                toggleHistoryButton.classList.remove('disabled');
                textarea.disabled = false;
                
                textarea.value = ''; 
                textarea.classList.remove('writing-active'); 
                statusMessage.textContent = "ì „ì†¡ ì™„ë£Œ! ìƒˆë¡œìš´ í¸ì§€ë¥¼ ì‘ì„±í•˜ì„¸ìš”.";
                statusMessage.style.color = 'green';
                setTimeout(() => {
                    statusMessage.textContent = "ë²„íŠ¼ì„ ëˆŒëŸ¬ í¸ì§€ë¥¼ ë³´ë‚´ì„¸ìš”.";
                    statusMessage.style.color = 'initial';
                }, 2000);
            }, 5000); // 5ì´ˆ ëŒ€ê¸°
        });
        
        // =======================================
        // ë§í’ì„ (Speech Bubble) ë¡œì§
        // =======================================
        
        // 1. í•˜ë‹¨ ì´ë¯¸ì§€ í´ë¦­ ì‹œ ë§í’ì„  í† ê¸€
        bottomImage.addEventListener('click', function(event) {
            event.stopPropagation(); 
            speechBubble.style.display = (speechBubble.style.display === 'block') ? 'none' : 'block';
        });

        // 2. ë§í’ì„  ì™¸ ì˜ì—­ í´ë¦­ ì‹œ ë§í’ì„  ë‹«ê¸°
        document.addEventListener('click', function(event) {
            // í´ë¦­ëœ ìš”ì†Œê°€ ë§í’ì„ ì´ê±°ë‚˜ ë§í’ì„  ë‚´ë¶€ì˜ ìš”ì†Œ, ë˜ëŠ” ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆê°€ ì•„ë‹ˆë¼ë©´ ë‹«ê¸°
            if (speechBubble.style.display === 'block' && 
                !speechBubble.contains(event.target) && 
                !bottomImageContainer.contains(event.target)) {
                speechBubble.style.display = 'none';
            }
        });
    });
</script>
</body>
</html>

